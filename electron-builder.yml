# Filename format for all artifacts
# Uses ${name} (kebab-case) instead of ${productName} to avoid URL mismatch issues
# Example: electron-app-template-1.0.0-win-x64.exe
artifactName: "${name}-${version}-${os}-${arch}.${ext}"

copyright: Copyright Â© 2026 wuchuheng

directories:
  buildResources: build
  output: dist/${os}/${arch}

files:
  - out/**/*
  - package.json
  - node_modules/better-sqlite3/**/*
  - node_modules/bindings/**/*
  - node_modules/file-uri-to-path/**/*

extraResources:
  - from: app-update.yml
    to: app-update.yml
  - from: src/renderer/assets/genLogo/icon.ico
    to: icon.ico

win:
  target:
    - target: nsis
      arch:
        - x64
  icon: src/renderer/assets/genLogo/icon.ico

asar: true
asarUnpack:
  - "**/node_modules/better-sqlite3/**/*"

nsis:
  oneClick: true
  perMachine: false
  allowToChangeInstallationDirectory: false
  deleteAppDataOnUninstall: false

# This ensures electron-updater works correctly
protocols:
  name: electron-app-template
  schemes:
    - electron-app-template
